{% extends 'layout.html' %}

{% block body %}
<div class="section">
    {% for babbler in user %}
    <div class="card">
        <div class="card-image">
            <figure class="image is-4by3">
                <img src="{{ url_for('static', filename='images/') }}{{ babbler.username }}.jpg" alt="{{ babbler.username }}">
            </figure>
        </div>
        <div class="card-content">
            <div class="media">
                <div class="media-left">
                    <figure class="image is-48x48">
                        <img src="{{ url_for('static', filename='images/') }}{{ babbler.username }}.jpg" alt="{{ babbler.username }}">
                    </figure>
                </div>
                <div class="content">
                    <p class="title is-4">{{ babbler.publicName }}</p>
                    <p class="subtitle is-6">@{{ babbler.username }}</p>
                </div>
            </div>
        </div>
        <footer class="card-footer ">
            {% if followed == True %}
                <form action="/unfollow/{{ babbler.username }}" method="post" class="card-footer-item">
                    <button type="submit" name="other" value="{{ babbler.username }}"
                            style="color: #3273dc;font-size:1rem;font-weight: 400;background-color: Transparent;background-repeat:no-repeat;border: none;cursor:pointer;overflow: hidden;outline:none;">Unfollow</button>
                </form>
            {% else %}
                <form action="/follow/{{ babbler.username }}" method="post" class="card-footer-item">
                    <button type="submit" name="other" value="{{ babbler.username }}"
                            style="color: #3273dc;font-size:1rem;font-weight: 400;background-color: Transparent;background-repeat:no-repeat;border: none;cursor:pointer;overflow: hidden;outline:none;">Follow</button>
                </form>
            {% endif %}
        </footer>
    </div>
    {% endfor %}
</div>
<div class="section">
    {% for babbler in user %}
    <p class="title is-2 is-spaced">Babbles of {{ babbler.username }}</p>
    {% endfor %}
    {% for babble in babbles %}
    <div class="box">
        <article class="media">
            <div class="media-left">
                <figure class="image is-64x64">
                    <a href="/babblers/{{ babble.username }}"><img src="{{ url_for('static', filename='images/') }}{{ babble.username }}.jpg" alt="{{ babble.username }}"></a>
                </figure>
            </div>
            <div class="media-content">
                <div class="content">
                    <a href="/babblers/{{ babble.username }}">
                        <strong>@{{ babble.username }}</strong>
                    </a>
                    <small>
                        {{ babble.elapsed }} ago
                    </small>
                    <br>
                    <div style="white-space:pre-line;">
                        {{ babble.message }}
                    </div>
                    {% for tag in babble.tags %}
                     <a href="/tag/{{ tag.tag }}">#{{tag.tag}}</a>
                    {% endfor %}
                </div>
                <nav class="level is-mobile">
                    <div class="level-left">
                        <a class="level-item">
                            <span class="icon is-small"><i class="fas fa-reply"></i></span>
                        </a>
                        <a class="level-item">
                            <span class="icon is-small"><i class="fas fa-heart"></i></span>
                        </a>
                    </div>
                </nav>
            </div>
        </article>
    </div>
    {% endfor %}
</div>
{% endblock %}
